#pragma once
#include "../Math/Vector3f.h"
#include "../Render/Color4f.h"
#include "../Math/Quaternion.h"

class Entity
{
public:
	float	m;        // Значение массы.
	Vector3f  pos;      // Положение в пространстве.
	Quaternion	q;		// Положение в пространстве.
	Vector3f  vel;      // Скорость.
	Vector3f  force;    // Воздействующая сила.
	Color4f   color;
	bool moved;

	void applyForce(Vector3f _force);

	void init();	// Обнуляем «нашу» силу

	void simulate(float dt);

	void move(float dt);

	virtual void draw() {};

	virtual bool isBall() {	return false; }
	virtual bool isModel() { return false; }

};

inline void Entity::applyForce(Vector3f _force) 
{
	force += _force;    // Внешнюю силу прибавляем к «нашей».
}

inline void Entity::init()          // Обнуляем «нашу» силу
{
	force = {0, 0, 0};
	moved = false;
}

inline void Entity::simulate(float dt)
{
	vel += (force / m) * dt;  // Изменение в скорости добавляем к текущей скорости. Изменение пропорционально ускорению (сила/масса) и изменению времени	
	move(dt);
}

inline void Entity::move(float dt)
{
	pos += vel * dt;          // Изменение в положении добавляем к текущему положению. Изменение в положении Скорость*время
	moved = true;
}

